#lang racket

(provide make-tokenizer)

(require br-parser-tools/lex)

(define (make-tokenizer ip)
  (port-count-lines! ip)
  (define (next-token)
    (define cfg-lexer
      (lexer-src-pos
	[(from/to #\[ #\]) (token 'TITLE (trim-ends #\[ lexeme #\ ))]]
	[any-string (token 'STRING lexeme)]))
    (cfg-lexer ip))
  next-token)


